### User additions to .bashrc go in this file.
#echo bashrc_local

# ls command
alias ls='ls -Gh'

# tmux related settings
alias tmux='tmux -2' # Force tmux to assume the terminal supports 256 colours.
if [ -f "$HOME/.tmux.completion.bash" ]; then
	source $HOME/.tmux.completion.bash
fi

### bash tab-completion scripts
if [ -f "$HOME/.git-completion.bash" ]; then
	source $HOME/.git-completion.bash
fi

### ls colors
if [ -f "$HOME/.dircolors.256" ]; then
	eval "$(dircolors $HOME/.dircolors.256)"
fi

if [[ "$OSTYPE" == "linux-gnu" ]]; then # Linux
	# enable color support of ls and also add handy aliases
	if [ -x /usr/bin/dircolors ]; then
		test -r $HOME/.dircolors.256 && eval "$(dircolors -b $HOME/.dircolors.256)" || eval "$(dircolors -b)"
		alias ls='ls --color=auto'
		alias dir='dir --color=auto'
		alias vdir='vdir --color=auto'

		alias grep='grep --color=auto'
		alias fgrep='fgrep --color=auto'
		alias egrep='egrep --color=auto'
	fi

	# some more ls aliases
	alias ll='ls -alF'
	alias la='ls -A'
	alias l='ls -CF'

	### PATH to local scripts
	PATH_NEW=$HOME/.opt/bin
	if [ -d "$PATH_NEW" ]; then
		export PATH=$PATH_NEW${PATH:+:$PATH}
	fi

	if [[ "$NERSC_HOST" == "pdsf"* ]]; then
		### Command prompt
		export PS1='\[\e[0;31m\]\u@\h:\w\$ \[\e[m\]'

		### Useful directories
		export SCRATCH=/project/projectdirs/cuore/scratch/michsakai
		export SIMULATION_CUORE=/project/projectdirs/cuore/syncData/CUORE_simulation

		### Functions
		function g++-diana {
			local filename=$(basename "$@")
			local executable=${filename%.*}
			g++ -std=c++11 -O2 -Wall -Wextra -Wshadow -I${BOOST_ROOT}/include -L${BOOST_ROOT}/lib -lboost_regex $(root-config --cflags --glibs) -o ${executable} "$@"
		}
		function g++-root {
			local filename=$(basename "$@")
			local executable=${filename%.*}
			g++ -std=c++11 -O2 -Wall -Wextra -Wshadow -I${BOOST_ROOT}/include -L${BOOST_ROOT}/lib -lboost_regex $(root-config --cflags --glibs) -lRooFit -lMinuit2 -I${BOOST_ROOT}/include -o ${executable} "$@"
		}

		### System installed software
		module load cmake/3.5.2
		module load git/2.2.1

		### manually installed modules in Mich's home
		#module use /global/homes/m/mich/.opt/modulefiles

		### libevent libraries
		LD_LIBRARY_PATH_NEW=$HOME/.opt/libevent/libevent-2.1.8-stable/lib
		if [[ -d "$LD_LIBRARY_PATH_NEW" ]]; then
			export LD_LIBRARY_PATH=$LD_LIBRARY_PATH_NEW${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
		fi

	elif [[ "$(hostname)" == "nino" ]]; then
		### Command prompt
		export PS1='\[\e[0;36m\]\u@\h:\w\$ \[\e[m\]'

		function compile-with-root {
			local filename=$(basename "${@: -1}")
			local executable=${filename%.*}
			g++ -std=c++11 -Wall -Wextra -pedantic -o ${executable} $(root-config --cflags) "$@" $(root-config --libs)
		}
		function compile-with-rat {
			local filename=$(basename "${@: -1}")
			local executable=${filename%.*}
			g++ -std=c++11 -Wall -Wextra -pedantic -o ${executable} -I${RATROOT}/include $(root-config --cflags) "$@" -L${RATROOT}/lib -lRATEvent $(root-config --libs)
		}

		### libevent libraries
		LD_LIBRARY_PATH_NEW=$HOME/.opt/libevent/libevent-2.1.8-stable/lib
		if [[ -d "$LD_LIBRARY_PATH_NEW" ]]; then
			export LD_LIBRARY_PATH=$LD_LIBRARY_PATH_NEW${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
		fi

		### gvfs-trash command variables
		export XDG_DATA_HOME=${XDG_DATA_HOME:="$HOME/.local/share"}
		alias trash='gvfs-trash'
	fi

elif [[ "$OSTYPE" == "darwin"* ]]; then # MacOS
	### Colored terminal settings ###
	export CLICOLOR=1
	export LSCOLORS=GxFxCxDxBxegedabagaced
fi
